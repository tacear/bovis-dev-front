{"version":3,"file":"azure-msal-angular.js","sources":["../../src/constants.ts","../../src/packageMetadata.ts","../../src/msal.service.ts","../../src/msal.broadcast.service.ts","../../src/msal.guard.ts","../../src/msal.interceptor.ts","../../src/msal.redirect.component.ts","../../src/msal.module.ts","../../src/msal.navigation.client.ts","../../src/public-api.ts","../../src/azure-msal-angular.ts"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;;;;AACA,MAGa,aAAa,GAAG,IAAI,cAAc,CAAS,eAAe,EAAE;AACzE,MACa,iBAAiB,GAAG,IAAI,cAAc,CAAS,mBAAmB,EAAE;AACjF,MACa,uBAAuB,GAAG,IAAI,cAAc,CAAS,yBAAyB,EAAE;AAC7F,MACa,qBAAqB,GAAG,IAAI,cAAc,CAAS,uBAAuB;AAAG;ACb1F;AACO,MAAM,IAAI,GAAG,qBAAqB,CAAC;AAC1C,MAAa,OAAO,GAAG;AAAU;ACFjC;AACA;AACA;AACA;AACA,MAqBa,WAAW;AAAI,IAIxB,YACkC,QAAkC,EACxD,QAAkB;AAC/B,QAFmC,aAAQ,GAAR,QAAQ,CAA0B;AAAE,QAC1D,aAAQ,GAAR,QAAQ,CAAU;AAClC,QACQ,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;AAC/D,QAAQ,IAAI,IAAI,EAAE;AAClB,YAAY,IAAI,CAAC,YAAY,GAAG,IAAI,IAAI,EAAE,CAAC;AAC3C,SAAS;AACT,QAAQ,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC,UAAU,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AAC5E,KAAK;AACL,IACI,UAAU;AAAM,QACZ,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC;AAChD,KAAK;AACL,IAAI,iBAAiB,CAAC,OAAqB;AAAK,QACxC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC;AAC9D,KAAK;AACL,IAAI,oBAAoB,CAAC,OAAwB;AAAK,QAC9C,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC;AACjE,KAAK;AACL,IAAI,kBAAkB,CAAC,aAA4B;AAAK,QAChD,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC,CAAC;AACrE,KAAK;AACL,IAAI,wBAAwB,CAAC,IAAa;AAAK,QACvC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;AACpF,KAAK;AACL,IAAI,UAAU,CAAC,OAAsB;AAAK,QAClC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;AACvD,KAAK;AACL,IAAI,aAAa,CAAC,OAAyB;AAAK,QACxC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC;AAC1D,KAAK;AACL,IAAI,MAAM,CAAC,aAAiC;AAAK,QACzC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC;AACzD,KAAK;AACL,IAAI,cAAc,CAAC,aAAiC;AAAK,QACjD,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;AACjE,KAAK;AACL,IAAI,WAAW,CAAC,aAAsC;AAAK,QACnD,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,CAAC;AAC9D,KAAK;AACL,IAAI,SAAS,CAAC,OAAyB;AAAK,QACpC,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;AACtD,KAAK;AACL;AACA;AACA;AACA;AACA,IAAI,SAAS;AAAM,QACX,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AAC1B,YAAY,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;AACzE,SAAS;AACT,QAAQ,OAAO,IAAI,CAAC,MAAM,CAAC;AAC3B,KAAK;AACL;AACA,IAAI,SAAS,CAAC,MAAc;AAAK,QACzB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;AAClD,QAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;AACxC,KAAK;AACL;yCAhEC,UAAU;+GACT;AAAE;AAAsC,4CAKjC,MAAM,SAAC,aAAa;AAAU,YAxB9B,QAAQ;AAAI;;;;;;6DAAE;AAAC;ACNxB;AACA;AACA;AACA;AACA,MASa,oBAAoB;AACjC,IAKI,YACmC,YAAsC,EAC7D,WAAwB,EACmB,mBAAgD;AACxG,QAHoC,iBAAY,GAAZ,YAAY,CAA0B;AAAE,QAC/D,gBAAW,GAAX,WAAW,CAAa;AAAE,QACiB,wBAAmB,GAAnB,mBAAmB,CAA6B;AAC3G;AACyE,QACjE,IAAI,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,CAAC,cAAc,GAAG,CAAC,EAAE;AACrF,YAAY,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,kFAAkF,IAAI,CAAC,mBAAmB,CAAC,cAAc,SAAS,CAAC,CAAC;AACrL,YAAY,IAAI,CAAC,YAAY,GAAG,IAAI,aAAa,CAAe,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,CAAC;AACzG,SAAS;AAAE,aAAI;AACf;AACA,YAAY,IAAI,CAAC,YAAY,GAAG,IAAI,OAAO,EAAgB,CAAC;AAC5D,SAAS;AACT,QACQ,IAAI,CAAC,YAAY,GAAI,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC;AAC9D;AAC4G,QACpG,IAAI,CAAC,WAAW,GAAG,IAAI,eAAe,CAAoB,iBAAiB,CAAC,OAAO,CAAC,CAAC;AAC7F,QAAQ,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;AAC3D,QACQ,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,OAAqB;AACjE,YAAY,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAC5C,YAAY,MAAM,MAAM,GAAG,iBAAiB,CAAC,6BAA6B,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC5G,YAAY,IAAI,MAAM,KAAK,IAAI,EAAE;AACjC,gBAAgB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,sBAAsB,OAAO,CAAC,SAAS,uCAAuC,IAAI,CAAC,WAAW,CAAC,KAAK,OAAO,MAAM,EAAE,CAAC,CAAC;AAC1K,gBAAgB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC9C,aAAa;AACb,SAAS,CAAC,CAAC;AACX,KAAK;AACL;kDApCC,UAAU;0IACT;AAAE;AACU,4CAML,MAAM,SAAC,aAAa;AAAU,YAX9B,WAAW;AAAK,4CAahB,QAAQ,YAAI,MAAM,SAAC,qBAAqB;AAAS;;;;;;;;;;;kCAAE;AAAC;ACtB7D;AACA;AACA;AACA;AACA,MAaa,SAAS;AAAI,IAGtB,YACuC,eAAuC,EAClE,oBAA0C,EAC1C,WAAwB,EACxB,QAAkB,EAClB,MAAc;AAC3B,QALwC,oBAAe,GAAf,eAAe,CAAwB;AAAE,QACpE,yBAAoB,GAApB,oBAAoB,CAAsB;AAAE,QAC5C,gBAAW,GAAX,WAAW,CAAa;AAAE,QAC1B,aAAQ,GAAR,QAAQ,CAAU;AAAE,QACpB,WAAM,GAAN,MAAM,CAAQ;AAC9B;AACqE,QAC7D,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC;AAC1D,KAAK;AACL;AACO;AAC4B;AAClB;AACX,IACF,QAAQ,CAAC,GAAW;AAAK,QACrB,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AACzC,KAAK;AACL;AACO;AACgD;AACL;AACd;AAC7B,IACH,iBAAiB,CAAC,IAAY;AAAK,QAC/B,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,iCAAiC,CAAC,CAAC;AAChF;AACA,QAAQ,MAAM,YAAY,GAAG,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;AACnE,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AACrH;AAC+D,QACvD,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;AAC/D;AACiC,QACzB,IAAI,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;AACrC,YAAY,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,qCAAqC,CAAC,CAAC;AACxF,YAAY,OAAO,GAAG,OAAO,IAAI,OAAO,EAAE,CAAC;AAC3C,SAAS;AACT;AACU;AAC+G;AACvC;AACvE,QACH,OAAO,GAAG,OAAO,GAAG,IAAI,EAAE,CAAC;AACnC,KAAK;AACL;AACO;AACsC;AACD;AACrC,IACK,kBAAkB,CAAC,KAA0B;AAAK,QACtD,MAAM,WAAW,GAAG,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,KAAK,UAAU;AAClF,cAAc,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC;AACvE,gCAAmB,IAAI,CAAC,eAAe,CAAC,WAAW,CAAE,CAAC;AACtD,QAAQ,IAAI,IAAI,CAAC,eAAe,CAAC,eAAe,KAAK,eAAe,CAAC,KAAK,EAAE;AAC5E,YAAY,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC;AAChF,YAAY,OAAO,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,WAA2B,CAAC;AAC3E,iBAAiB,IAAI,CACD,GAAG,CAAC,CAAC,QAA8B;AACvD,gBAAwB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,yEAAyE,CAAC,CAAC;AACxI,gBAAwB,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AACrF,gBAAwB,OAAO,IAAI,CAAC;AACpC,aAAqB,CAAC,CACL,CAAC;AAClB,SAAS;AACT,QACQ,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,gCAAgC,CAAC,CAAC;AAC/E,QAAQ,MAAM,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACpE,QAAQ,OAAO,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,gBAClC,iBAAiB,IACd,WAAW,CACE,CAAC;AAC7B,aAAa,IAAI,CACD,GAAG,CAAC,MAAM,KAAK,CAAC,CACnB,CAAC;AACd,KAAK;AACL;AACO;AACwI;AAC5H;AACb,IACM,cAAc,CAAC,KAA2B;AAAK,QACnD,IAAI,IAAI,CAAC,eAAe,CAAC,eAAe,KAAK,eAAe,CAAC,KAAK,IAAI,IAAI,CAAC,eAAe,CAAC,eAAe,KAAK,eAAe,CAAC,QAAQ,EAAE;AACjJ,YAAY,MAAM,IAAI,6BAA6B,CAAC,0BAA0B,EAAE,mJAAmJ,CAAC,CAAC;AACrO,SAAS;AACT,QAAQ,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;AACrE;AACU;AACyE;AACzB;AAC/C,QACH,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;AAC3C,YAAY,IAAI,SAAS,CAAC,2BAA2B,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,gBAAgB,EAAE,CAAC,MAAM,CAAC,qBAAqB,EAAE;AACxL,gBAAgB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,mIAAmI,CAAC,CAAC;AAC1L,gBAAgB,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC;AACjC,aAAa;AACb,SAAS;AAAE,aAAI;AACf,YAAY,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,kFAAkF,CAAC,CAAC;AAClI,YAAY,OAAO,EAAE,CAAC,IAAI,CAAC,CAAC;AAC5B,SAAS;AACT;AACW;AAC4E;AAC5E,QACH,IAAI,IAAI,CAAC,eAAe,CAAC,gBAAgB,EAAE;AACnD,YAAY,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,CAAC;AACzF,SAAS;AACT;AACkF,QAC1E,MAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACrD,QACQ,OAAO,IAAI,CAAC,WAAW,CAAC,wBAAwB,EAAE;AAC1D,aAAa,IAAI,CACD,SAAS,CAAC;AAC1B,YAAoB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,MAAM,EAAE;AAC5E,gBAAwB,IAAI,KAAK,EAAE;AACnC,oBAA4B,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,4DAA4D,CAAC,CAAC;AAC/H,oBAA4B,OAAO,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;AAClE,iBAAyB;AAAE,gBACH,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,sDAAsD,CAAC,CAAC;AACrH,gBAAwB,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC;AACzC,aAAqB;AACrB,YACoB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,yDAAyD,CAAC,CAAC;AACpH;AAC8D,YAC1C,IAAI,KAAK,EAAE;AAC/B;AAAoB;AACM;AACA;AACA;AAAqB;AACtC;AAEG;AACS;AACI;AACxB,gBAEuB,MAAM,eAAe,GAAY,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACtF,gBAAwB,MAAM,oBAAoB,GAAY,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AACpJ,gBAAwB,MAAM,WAAW,GAAY,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACpH;AACuH,gBAC/F,IAAI,eAAe,KAAK,oBAAoB,IAAI,WAAW,CAAC,EAAE;AACtF,oBAA4B,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,iEAAiE,CAAC,CAAC;AACjI;AAC+C,oBACnB,IAAI,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;AAC/D,wBAAgC,OAAO,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;AAC/E,qBAA6B;AAC7B;AAC+B,oBACH,OAAO,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;AACzD,iBAAyB;AACzB,aAAqB;AACrB,YACoB,OAAO,EAAE,CAAC,IAAI,CAAC,CAAC;AACpC,SACiB,CAAC,EACF,UAAU,CAAC,CAAC,KAAY;AACxC,YAAoB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,KAAK,CAAC,oDAAoD,CAAC,CAAC;AAC7G,YAAoB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,QAAQ,CAAC,kBAAkB,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;AAC7F;AAAiB;AACwG;AACX;AAAiB,YAE3G,IAAI,IAAI,CAAC,gBAAgB,IAAI,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,KAAK,EAAE;AAC3F,gBAAwB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,2CAA2C,CAAC,CAAC;AAC1G,gBAAwB,OAAO,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;AACzD,aAAqB;AACrB,YAAoB,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC;AACrC,SAAiB,CAAC,CACL,CAAC;AACd,KAAK;AACL,IACI,YAAY,CAAC,IAAY;AAAK,QAC1B,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AAC9C,YAAY,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM;AACtE,YAAY,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AAAK,YAChC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;AACxC,KAAK;AACL,IACI,WAAW,CAAC,KAA6B,EAAE,KAA0B;AAAK,QACtE,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;AACpE,QAAQ,OAAO,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;AAC1C,KAAK;AACL,IACI,gBAAgB,CAAC,KAA6B,EAAE,KAA0B;AAAK,QAC3E,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC;AACzE,QAAQ,OAAO,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;AAC1C,KAAK;AACL,IACI,OAAO;AAAM,QACT,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;AAChE;AACA,QAAQ,OAAO,IAAI,CAAC,cAAc,EAAE,CAAC;AACrC,KAAK;AACL;uCAzMC,UAAU;yGACT;AAAE;AAAoC,4CAI/B,MAAM,SAAC,iBAAiB;AAAU,YAPlC,oBAAoB;AAAK,YARzB,WAAW;AAAK,YAEhB,QAAQ;AAAK,YAHiF,MAAM;AAAI;;;;;;6IAAE;AAAC;ACLpH;AACA;AACA;AACA;AACA,MAkBa,eAAe;AAAI,IAG5B,YAC6C,qBAAmD,EACpF,WAAwB,EACxB,QAAkB,EAClB,oBAA0C;AACzD;AAAuH,IAC9F,QAAc;AACrC,QAN8C,0BAAqB,GAArB,qBAAqB,CAA8B;AAAE,QACtF,gBAAW,GAAX,WAAW,CAAa;AAAE,QAC1B,aAAQ,GAAR,QAAQ,CAAU;AAAE,QACpB,yBAAoB,GAApB,oBAAoB,CAAsB;AAAE,QAIpD,IAAI,CAAC,SAAS,GAAG,QAAoB,CAAC;AAC9C,KAAK;AACL;AACkE,IAC9D,SAAS,CAAC,GAAqB,EAAE,IAAiB;AAAK,QACnD,IAAI,IAAI,CAAC,qBAAqB,CAAC,eAAe,KAAK,eAAe,CAAC,KAAK,IAAI,IAAI,CAAC,qBAAqB,CAAC,eAAe,KAAK,eAAe,CAAC,QAAQ,EAAE;AAC7J,YAAY,MAAM,IAAI,6BAA6B,CAAC,0BAA0B,EAAE,6JAA6J,CAAC,CAAC;AAC/O,SAAS;AACT,QACQ,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,4BAA4B,CAAC,CAAC;AAC3E,QAAQ,MAAM,MAAM,GAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;AACtE;AAC4D,QACpD,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;AAC5C,YAAY,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,sCAAsC,CAAC,CAAC;AACzF,YAAY,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AACpC,SAAS;AACT;AAC0D,QAClD,IAAI,OAAoB,CAAC;AACjC,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,gBAAgB,EAAE,EAAE;AAC5D,YAAY,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,uCAAuC,CAAC,CAAC;AAC1F,YAAY,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,gBAAgB,EAAE,CAAC;AACnE,SAAS;AAAE,aAAI;AACf,YAAY,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,4DAA4D,CAAC,CAAC;AAC/G,YAAY,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;AACpE,SAAS;AACT,QACQ,MAAM,WAAW,GAAG,OAAO,IAAI,CAAC,qBAAqB,CAAC,WAAW,KAAK,UAAU;AACxF,cAAc,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,GAAG,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC;AACjG,8CAAmB,IAAI,CAAC,qBAAqB,CAAC,WAAW,KAAE,OAAO,GAAE,CAAC;AACrE,QACQ,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,iBAAiB,MAAM,CAAC,MAAM,4BAA4B,CAAC,CAAC;AACtG,QAAQ,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,kBAAkB,MAAM,sBAAsB,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;AACtG,QACQ,OAAO,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,MAAM,EAAE,OAAO,CAAC;AAC9D,aAAa,IAAI,CACD,SAAS,CAAC,CAAC,MAA4B;AACvD,YAAoB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,6CAA6C,CAAC,CAAC;AACxG,YAAoB,MAAM,OAAO,GAAG,GAAG,CAAC,OAAO;AAC/C,iBAAyB,GAAG,CAAC,eAAe,EAAE,UAAU,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;AAC9E,YACoB,MAAM,YAAY,GAAG,GAAG,CAAC,KAAK,CAAC,EAAC,OAAO,EAAC,CAAC,CAAC;AAC9D,YAAoB,OAAO,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AACrD,SAAiB,CAAC,CACL,CAAC;AACd,KAAK;AACL;AACO;AAC8H;AACpG;AACmB;AACvB;AACQ;AAC9B,IACK,YAAY,CAAC,WAAuC,EAAE,MAAgB,EAAE,OAAoB;AAAK;AACpC,QACjE,OAAO,IAAI,CAAC,WAAW,CAAC,kBAAkB,iCAAK,WAAW,KAAE,MAAM,EAAE,OAAO,IAAG;AACtF,aAAa,IAAI,CACD,UAAU,CAAC;AAC3B,YAAoB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,KAAK,CAAC,wFAAwF,CAAC,CAAC;AACjJ,YAAoB,OAAO,IAAI,CAAC,oBAAoB,CAAC,WAAW;AAChE,iBAAyB,IAAI,CACD,IAAI,CAAC,CAAC,CAAC,EACP,SAAS,CAAC,CAAC,MAAyB;AAChE,gBAAgC,IAAI,MAAM,KAAK,iBAAiB,CAAC,IAAI,EAAE;AACvE,oBAAoC,OAAO,IAAI,CAAC,yBAAyB,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;AAC/F,iBAAiC;AACjC,gBACgC,OAAO,IAAI,CAAC,oBAAoB,CAAC,WAAW;AAC5E,qBAAqC,IAAI,CACD,MAAM,CAAC,CAAC,MAAyB,KAAK,MAAM,KAAK,iBAAiB,CAAC,IAAI,CAAC,EACxE,IAAI,CAAC,CAAC,CAAC,EACP,SAAS,CAAC,MAAM,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC,CACnE,CAAC;AACtC,aAA6B,CAAC,CACL,CAAC;AAC1B,SAAiB,CAAC,EACF,SAAS,CAAC,CAAC,MAA4B;AAAQ,YAC3C,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE;AAC7C,gBAAwB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,KAAK,CAAC,kIAAkI,CAAC,CAAC;AAC/L,gBAAwB,OAAO,IAAI,CAAC,oBAAoB,CAAC,WAAW;AACpE,qBAA6B,IAAI,CACD,MAAM,CAAC,CAAC,MAAyB,KAAK,MAAM,KAAK,iBAAiB,CAAC,IAAI,CAAC,EACxE,IAAI,CAAC,CAAC,CAAC,EACP,SAAS,CAAC,MAAM,IAAI,CAAC,yBAAyB,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC,CACvE,CAAC;AAC9B,aAAqB;AACrB,YAAoB,OAAO,EAAE,CAAC,MAAM,CAAC,CAAC;AACtC,SAAiB,CAAC,CACL,CAAC;AACd,KAAK;AACL;AACO;AAC8C;AACpB;AACmB;AACD;AAC5C,IACK,yBAAyB,CAAC,WAAuC,EAAE,MAAgB;AAAK,QAC5F,IAAI,IAAI,CAAC,qBAAqB,CAAC,eAAe,KAAK,eAAe,CAAC,KAAK,EAAE;AAClF,YAAY,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,kEAAkE,CAAC,CAAC;AACrH,YAAY,OAAO,IAAI,CAAC,WAAW,CAAC,iBAAiB,iCAAM,WAAW,KAAE,MAAM,IAAG,CAAC;AAClF,SAAS;AACT,QAAQ,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,qEAAqE,CAAC,CAAC;AACpH,QAAQ,MAAM,iBAAiB,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;AACvD,QAAQ,IAAI,CAAC,WAAW,CAAC,oBAAoB,iCAAK,WAAW,KAAE,MAAM,EAAE,iBAAiB,IAAG,CAAC;AAC5F,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL;AACO;AACwE;AACtC;AACU;AACE;AAC/C;AACC,IACK,oBAAoB,CAAC,QAAgB,EAAE,UAAkB;AAAK,QAClE,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,2CAA2C,CAAC,CAAC;AAC1F;AAC4E,QACpE,MAAM,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;AACrE,QACQ,MAAM,uBAAuB,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,oBAAoB,CAAC,IAAI,EAAE,CAAC,CAAC;AAC3G,QACQ,MAAM,0BAA0B,GAAG,IAAI,CAAC,wBAAwB,CAAC,uBAAuB,EAAE,kBAAkB,CAAC,CAAC;AACtH;AAC4J,QACpJ,IAAI,0BAA0B,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,EAAE;AACrE,YAAY,OAAO,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,qBAAqB,CAAC,oBAAoB,EAAE,0BAA0B,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC;AACzJ,SAAS;AAAE,aAAI,IAAI,0BAA0B,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,EAAC;AAC3E,YAAY,OAAO,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,qBAAqB,CAAC,oBAAoB,EAAE,0BAA0B,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC;AACzJ,SAAS;AACT,QACQ,OAAO,IAAI,CAAC;AACpB,KAAK;AACL;AACO;AACoD;AAClB;AACnB;AACP;AACR,IACK,wBAAwB,CAAC,2BAAqC,EAAE,QAAgB;AAAK,QACzF,MAAM,iBAAiB,GAAsB,EAAC,iBAAiB,EAAE,EAAE,EAAE,iBAAiB,EAAE,EAAE,EAAC,CAAC;AACpG,QACQ,2BAA2B,CAAC,OAAO,CAAC,GAAG;AAC/C;AACA,YAAY,MAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC/D,YAAY,IAAI,WAAW,CAAC,YAAY,CAAC,aAAa,EAAE,QAAQ,CAAC,EAAC;AAClE,gBAAgB,iBAAiB,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC9D,aAAa;AACb;AACmD,YACvC,MAAM,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;AACzD,YAAY,MAAM,aAAa,GAAG,IAAI,SAAS,CAAC,WAAW,CAAC,CAAC,gBAAgB,EAAE,CAAC;AAChF,YAAY,MAAM,gBAAgB,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;AACnE,YAAY,MAAM,kBAAkB,GAAG,IAAI,SAAS,CAAC,gBAAgB,CAAC,CAAC,gBAAgB,EAAE,CAAC;AAC1F;AACwE,YAC5D,MAAM,qBAAqB,GAAG,aAAa,CAAC,WAAW,GAAG,GAAG,aAAa,CAAC,YAAY,IAAI,aAAa,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;AACzL;AACiI,YACrH,IAAI,aAAa,CAAC,eAAe,KAAK,kBAAkB,CAAC,eAAe,IAAI,WAAW,CAAC,YAAY,CAAC,qBAAqB,EAAE,gBAAgB,CAAC,IAAI,qBAAqB,KAAK,EAAE,IAAI,qBAAqB,KAAK,IAAI,EAAC;AAC5N,gBAAgB,iBAAiB,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC9D,aAAa;AACb,SAAS,CAAC,CAAC;AACX,QACQ,OAAO,iBAAiB,CAAC;AACjC,KAAK;AACL;AACO;AACyC;AAC/B;AACF;AACR,IACK,cAAc,CAAC,GAAW;AAAK,QACnC,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AACvD,QAAQ,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;AACxB,QAAQ,OAAO,IAAI,CAAC,IAAI,CAAC;AACzB,KAAK;AACL;AACO;AAC+E;AAC7B;AACiB;AACvB;AACpC;AACR,IACK,qBAAqB,CAAC,oBAA+E,EAAE,aAAuB,EAAE,UAAkB;AAAK,QAC3J,MAAM,gBAAgB,GAAG,EAAE,CAAC;AACpC;AACyE,QACjE,aAAa,CAAC,OAAO,CAAC,eAAe;AAC7C,YAAY,MAAM,iBAAiB,GAAG,EAAE,CAAC;AACzC,YAAY,MAAM,oBAAoB,GAAG,oBAAoB,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;AACnF;AACgD,YACpC,IAAI,oBAAoB,KAAK,IAAI,EAAE;AAC/C,gBAAgB,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC5C,gBAAgB,OAAO;AACvB,aAAa;AACb,YACY,oBAAoB,CAAC,OAAO,CAAC,KAAK;AAC9C;AACA,gBAAgB,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC/C,oBAAoB,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAClD,iBAAiB;AAAE,qBAAI;AACvB;AACA,oBAAoB,MAAM,uBAAuB,GAAG,UAAU,CAAC,WAAW,EAAE,CAAC;AAC7E,oBAAoB,MAAM,wBAAwB,GAAG,KAAK,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;AACpF;AACA,oBAAoB,IAAI,wBAAwB,KAAK,uBAAuB,EAAE;AAC9E;AACA,wBAAwB,IAAI,KAAK,CAAC,MAAM,KAAK,IAAI,EAAE;AACnD,4BAA4B,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACxD,yBAAyB;AAAE,6BAAI;AAC/B,4BAA4B,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK;AACvD,gCAAgC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC9D,6BAA6B,CAAC,CAAC;AAC/B,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB,aAAa,CAAC,CAAC;AACf;AACgF,YACpE,IAAI,iBAAiB,CAAC,MAAM,GAAG,CAAC,EAAE;AAC9C,gBAAgB,gBAAgB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;AACzD,aAAa;AACb,SAAS,CAAC,CAAC;AACX,QACQ,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE;AACzC,YAAY,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE;AAC7C,gBAAgB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,+DAA+D,CAAC,CAAC;AACtH,aAAa;AACb;AACA,YAAY,OAAO,gBAAgB,CAAC,CAAC,CAAC,CAAC;AACvC,SAAS;AACT,QACQ,OAAO,IAAI,CAAC;AACpB,KAAK;AACL;6CA7PC,UAAU;2HACT;AAAE;AAA0C,4CAIrC,MAAM,SAAC,uBAAuB;AAAU,YAZxC,WAAW;AAAK,YAHhB,QAAQ;AAAK,YAQb,oBAAoB;AAAK,4CAYzB,MAAM,SAAC,QAAQ;AAAS;;;;;;;;;kCAAE;AAAC;AC/BpC;AACA;AACA;AACA;AACA,MAea,qBAAqB;AAAI,IAElC,YAAoB,WAAwB;AAAK,QAA7B,gBAAW,GAAX,WAAW,CAAa;AAAE,KAAG;AACrD,IACI,QAAQ;AAAM,QACV,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,iCAAiC,CAAC,CAAC;AAChF,QAAQ,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC,IAAI,CAC9B,SAAS,CAAC;AACtB,YAAgB,OAAO,IAAI,CAAC,WAAW,CAAC,wBAAwB,EAAE,CAAC;AACnE,SAAa,CAAC,CACL,CAAC,SAAS,EAAE,CAAC;AACtB,KAAK;AACL;mDAhBC,SAAS,SAAC,mBACP,QAAQ,EAAE,cAAc,mBACxB,QAAQ,EAAE,EAAE;EACf,uOACI;AAAE;AAAgD,YAN9C,WAAW;AAAI;;;;;;;qEAAE;AAAC;ACb3B;AACA;AACA;AACA;AACA,MAsBa,UAAU;AACvB,IAAI,OAAO,OAAO,CACV,YAAsC,EACtC,WAAmC,EACnC,iBAA+C;AACpD,QACK,OAAO;AACf,YAAY,QAAQ,EAAE,UAAU;AAChC,YAAY,SAAS,EAAE;AACvB,gBAAgB;AAChB,oBAAoB,OAAO,EAAE,aAAa;AAC1C,oBAAoB,QAAQ,EAAE,YAAY;AAC1C,iBAAiB;AACjB,gBAAgB;AAChB,oBAAoB,OAAO,EAAE,iBAAiB;AAC9C,oBAAoB,QAAQ,EAAE,WAAW;AACzC,iBAAiB;AACjB,gBAAgB;AAChB,oBAAoB,OAAO,EAAE,uBAAuB;AACpD,oBAAoB,QAAQ,EAAE,iBAAiB;AAC/C,iBAAiB;AACjB,gBAAgB,WAAW;AAC3B,aAAa;AACb,SAAS,CAAC;AACV,KAAK;AACL;wCAnCC,QAAQ,SAAC,mBACN;EAAY,EAAE,CAAC,qBAAqB,CAAC,mBACrC,OAAO,EAAE,uBACL;WAAY,mBACf,mBACD,SAAS,EAAE;YACP;EAAS,uBACT;gBAAoB;AACvB,eACJ;;;;;;;;;;;;;kOACI;AAAC;AC1BN;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA,MACa,0BAA2B,SAAQ,gBAAgB;AAChE,IACI,YACY,WAAwB,EACxB,MAAc,EACd,QAAkB;AAC/B,QACK,KAAK,EAAE,CAAC;AAChB,QALgB,gBAAW,GAAX,WAAW,CAAa;AAAE,QAC1B,WAAM,GAAN,MAAM,CAAQ;AAAE,QAChB,aAAQ,GAAR,QAAQ,CAAU;AAClC,KAEK;AACL,IACU,gBAAgB,CAAC,GAAU,EAAE,OAA0B;AAAK;AAC1C;AAEvB;AAAa;AAA+D,YAFzE,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,KAAK,CAAC,mCAAmC,CAAC,CAAC;AAChF,YACQ,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,yCAAyC,CAAC,CAAC;AACxF,YAAQ,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,UAAU,CAAC,mDAAmD,GAAG,EAAE,CAAC,CAAC;AAC1G;AACwG,YAChG,IAAI,OAAO,CAAC,SAAS,EAAE;AAC/B,gBAAY,OAAO,OAAM,gBAAgB,YAAC,GAAG,EAAE,OAAO,EAAE;AACxD,aAAS;AAAE,iBAAI;AACf;AACI,gBAAQ,MAAM,aAAa,GAAG,IAAI,SAAS,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,CAAC;AACxE,gBAAY,MAAM,MAAM,GAAG,aAAa,CAAC,WAAW,GAAG,GAAG,aAAa,CAAC,YAAY,IAAI,aAAa,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;AAC1K,gBAAY,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,UAAU,EAAE,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC;AACjF,aAAS;AACT,YAAQ,OAAO,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;AAClD,SAAK;AACH,KADG;AACL;wDA5BC,UAAU;4JACT;AAAE;AAAqD,YAThD,WAAW;AAAK,YAFhB,MAAM;AAAK,YACX,QAAQ;AAAI;;;yHAAE;AAAC;ACPxB;AACA;AACA;AACA;AAAI;ACHJ;AACC;AACC;AAED;AAAC;AACsM","sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { InjectionToken } from \"@angular/core\";\r\n\r\nexport const MSAL_INSTANCE = new InjectionToken<string>(\"MSAL_INSTANCE\");\r\n\r\nexport const MSAL_GUARD_CONFIG = new InjectionToken<string>(\"MSAL_GUARD_CONFIG\");\r\n\r\nexport const MSAL_INTERCEPTOR_CONFIG = new InjectionToken<string>(\"MSAL_INTERCEPTOR_CONFIG\");\r\n\r\nexport const MSAL_BROADCAST_CONFIG = new InjectionToken<string>(\"MSAL_BROADCAST_CONFIG\");\r\n","/* eslint-disable header/header */\r\nexport const name = \"@azure/msal-angular\";\r\nexport const version = \"2.5.12\";\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { Inject, Injectable } from \"@angular/core\";\r\nimport { Location } from \"@angular/common\";\r\nimport {\r\n    IPublicClientApplication,\r\n    EndSessionRequest,\r\n    EndSessionPopupRequest,\r\n    AuthenticationResult,\r\n    RedirectRequest,\r\n    SilentRequest,\r\n    PopupRequest,\r\n    SsoSilentRequest,\r\n    Logger,\r\n    WrapperSKU\r\n} from \"@azure/msal-browser\";\r\nimport { MSAL_INSTANCE } from \"./constants\";\r\nimport { Observable, from } from \"rxjs\";\r\nimport { IMsalService } from \"./IMsalService\";\r\nimport { name, version } from \"./packageMetadata\";\r\n\r\n@Injectable()\r\nexport class MsalService implements IMsalService {\r\n    private redirectHash: string;\r\n    private logger: Logger;\r\n\r\n    constructor(\r\n        @Inject(MSAL_INSTANCE) public instance: IPublicClientApplication,\r\n        private location: Location\r\n    ) {\r\n        const hash = this.location.path(true).split(\"#\").pop();\r\n        if (hash) {\r\n            this.redirectHash = `#${hash}`;\r\n        }\r\n        this.instance.initializeWrapperLibrary(WrapperSKU.Angular, version);\r\n    }\r\n\r\n    initialize(): Observable<void> {\r\n        return from(this.instance.initialize());\r\n    }\r\n    acquireTokenPopup(request: PopupRequest): Observable<AuthenticationResult> {\r\n        return from(this.instance.acquireTokenPopup(request));\r\n    }\r\n    acquireTokenRedirect(request: RedirectRequest): Observable<void> {\r\n        return from(this.instance.acquireTokenRedirect(request));\r\n    }\r\n    acquireTokenSilent(silentRequest: SilentRequest): Observable<AuthenticationResult> {\r\n        return from(this.instance.acquireTokenSilent(silentRequest));\r\n    }\r\n    handleRedirectObservable(hash?: string): Observable<AuthenticationResult> {\r\n        return from(this.instance.handleRedirectPromise(hash || this.redirectHash));\r\n    }\r\n    loginPopup(request?: PopupRequest): Observable<AuthenticationResult> {\r\n        return from(this.instance.loginPopup(request));\r\n    }\r\n    loginRedirect(request?: RedirectRequest): Observable<void> {\r\n        return from(this.instance.loginRedirect(request));\r\n    }\r\n    logout(logoutRequest?: EndSessionRequest): Observable<void> {\r\n        return from(this.instance.logout(logoutRequest));\r\n    }\r\n    logoutRedirect(logoutRequest?: EndSessionRequest): Observable<void> {\r\n        return from(this.instance.logoutRedirect(logoutRequest));\r\n    }\r\n    logoutPopup(logoutRequest?: EndSessionPopupRequest): Observable<void> {\r\n        return from(this.instance.logoutPopup(logoutRequest));\r\n    }\r\n    ssoSilent(request: SsoSilentRequest): Observable<AuthenticationResult> {\r\n        return from(this.instance.ssoSilent(request));\r\n    }\r\n    /**\r\n     * Gets logger for msal-angular.\r\n     * If no logger set, returns logger instance created with same options as msal-browser\r\n     */\r\n    getLogger(): Logger {\r\n        if (!this.logger) {\r\n            this.logger = this.instance.getLogger().clone(name, version);\r\n        }\r\n        return this.logger;\r\n    }\r\n    // Create a logger instance for msal-angular with the same options as msal-browser\r\n    setLogger(logger: Logger): void {\r\n        this.logger = logger.clone(name, version);\r\n        this.instance.setLogger(logger);\r\n    }\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { Inject, Injectable, Optional } from \"@angular/core\";\r\nimport { BehaviorSubject, Observable, ReplaySubject, Subject } from \"rxjs\";\r\nimport { MSAL_BROADCAST_CONFIG, MSAL_INSTANCE } from \"./constants\";\r\nimport { EventMessage, EventMessageUtils, IPublicClientApplication, InteractionStatus } from \"@azure/msal-browser\";\r\nimport { MsalService } from \"./msal.service\";\r\nimport { MsalBroadcastConfiguration } from \"./msal.broadcast.config\";\r\n\r\n@Injectable()\r\nexport class MsalBroadcastService {\r\n    private _msalSubject: Subject<EventMessage>;\r\n    public msalSubject$: Observable<EventMessage>;\r\n    private _inProgress: BehaviorSubject<InteractionStatus>;\r\n    public inProgress$: Observable<InteractionStatus>;\r\n\r\n    constructor(\r\n        @Inject(MSAL_INSTANCE) private msalInstance: IPublicClientApplication,\r\n        private authService: MsalService,\r\n        @Optional() @Inject(MSAL_BROADCAST_CONFIG) private msalBroadcastConfig?: MsalBroadcastConfiguration\r\n    ) {\r\n        // Make _msalSubject a ReplaySubject if configured to replay past events\r\n        if (this.msalBroadcastConfig && this.msalBroadcastConfig.eventsToReplay > 0) {\r\n            this.authService.getLogger().verbose(`BroadcastService - replayPastEvents set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`);\r\n            this._msalSubject = new ReplaySubject<EventMessage>(this.msalBroadcastConfig.eventsToReplay);\r\n        } else {\r\n            // Defaults to _msalSubject being a Subject\r\n            this._msalSubject = new Subject<EventMessage>();\r\n        }\r\n\r\n        this.msalSubject$  = this._msalSubject.asObservable();\r\n\r\n        // InProgress as BehaviorSubject so most recent inProgress state will be available upon subscription\r\n        this._inProgress = new BehaviorSubject<InteractionStatus>(InteractionStatus.Startup);\r\n        this.inProgress$ = this._inProgress.asObservable();\r\n\r\n        this.msalInstance.addEventCallback((message: EventMessage) => {\r\n            this._msalSubject.next(message);\r\n            const status = EventMessageUtils.getInteractionStatusFromEvent(message, this._inProgress.value);\r\n            if (status !== null) {\r\n                this.authService.getLogger().verbose(`BroadcastService - ${message.eventType} results in setting inProgress from ${this._inProgress.value} to ${status}`);\r\n                this._inProgress.next(status);\r\n            }\r\n        });\r\n    }\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, CanActivateChild, CanLoad, UrlTree, Router } from \"@angular/router\";\r\nimport { MsalService } from \"./msal.service\";\r\nimport { Injectable, Inject, VERSION } from \"@angular/core\";\r\nimport { Location } from \"@angular/common\";\r\nimport { InteractionType, BrowserConfigurationAuthError, BrowserUtils, UrlString, PopupRequest, RedirectRequest, AuthenticationResult } from \"@azure/msal-browser\";\r\nimport { MsalGuardConfiguration } from \"./msal.guard.config\";\r\nimport { MSAL_GUARD_CONFIG } from \"./constants\";\r\nimport { concatMap, catchError, map } from \"rxjs/operators\";\r\nimport { Observable, of } from \"rxjs\";\r\nimport { MsalBroadcastService } from \"./msal.broadcast.service\";\r\n\r\n@Injectable()\r\nexport class MsalGuard implements CanActivate, CanActivateChild, CanLoad {\r\n    private loginFailedRoute?: UrlTree;\r\n\r\n    constructor(\r\n        @Inject(MSAL_GUARD_CONFIG) private msalGuardConfig: MsalGuardConfiguration,\r\n        private msalBroadcastService: MsalBroadcastService,\r\n        private authService: MsalService,\r\n        private location: Location,\r\n        private router: Router\r\n    ) { \r\n        // Subscribing so events in MsalGuard will set inProgress$ observable\r\n        this.msalBroadcastService.inProgress$.subscribe();\r\n    }\r\n\r\n    /**\r\n     * Parses url string to UrlTree\r\n     * @param url \r\n     */\r\n    parseUrl(url: string): UrlTree {\r\n        return this.router.parseUrl(url);\r\n    }\r\n\r\n    /**\r\n     * Builds the absolute url for the destination page\r\n     * @param path Relative path of requested page\r\n     * @returns Full destination url\r\n     */\r\n    getDestinationUrl(path: string): string {\r\n        this.authService.getLogger().verbose(\"Guard - getting destination url\");\r\n        // Absolute base url for the application (default to origin if base element not present)\r\n        const baseElements = document.getElementsByTagName(\"base\");\r\n        const baseUrl = this.location.normalize(baseElements.length ? baseElements[0].href : window.location.origin);\r\n\r\n        // Path of page (including hash, if using hash routing)\r\n        const pathUrl = this.location.prepareExternalUrl(path);\r\n\r\n        // Hash location strategy\r\n        if (pathUrl.startsWith(\"#\")) {\r\n            this.authService.getLogger().verbose(\"Guard - destination by hash routing\");\r\n            return `${baseUrl}/${pathUrl}`;\r\n        }\r\n\r\n        /*\r\n         * If using path location strategy, pathUrl will include the relative portion of the base path (e.g. /base/page).\r\n         * Since baseUrl also includes /base, can just concatentate baseUrl + path\r\n         */\r\n        return `${baseUrl}${path}`;\r\n    }\r\n\r\n    /**\r\n     * Interactively prompt the user to login\r\n     * @param url Path of the requested page\r\n     */\r\n    private loginInteractively(state: RouterStateSnapshot): Observable<boolean> {\r\n        const authRequest = typeof this.msalGuardConfig.authRequest === \"function\"\r\n            ? this.msalGuardConfig.authRequest(this.authService, state)\r\n            : { ...this.msalGuardConfig.authRequest };\r\n        if (this.msalGuardConfig.interactionType === InteractionType.Popup) {\r\n            this.authService.getLogger().verbose(\"Guard - logging in by popup\");\r\n            return this.authService.loginPopup(authRequest as PopupRequest)\r\n                .pipe(\r\n                    map((response: AuthenticationResult) => {\r\n                        this.authService.getLogger().verbose(\"Guard - login by popup successful, can activate, setting active account\");\r\n                        this.authService.instance.setActiveAccount(response.account);\r\n                        return true;\r\n                    })\r\n                );\r\n        }\r\n\r\n        this.authService.getLogger().verbose(\"Guard - logging in by redirect\");\r\n        const redirectStartPage = this.getDestinationUrl(state.url);\r\n        return this.authService.loginRedirect({\r\n            redirectStartPage,\r\n            ...authRequest\r\n        } as RedirectRequest)\r\n            .pipe(\r\n                map(() => false)\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Helper which checks for the correct interaction type, prevents page with Guard to be set as reidrect, and calls handleRedirectObservable\r\n     * @param state \r\n     */\r\n    private activateHelper(state?: RouterStateSnapshot): Observable<boolean|UrlTree> {\r\n        if (this.msalGuardConfig.interactionType !== InteractionType.Popup && this.msalGuardConfig.interactionType !== InteractionType.Redirect) {\r\n            throw new BrowserConfigurationAuthError(\"invalid_interaction_type\", \"Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration\");\r\n        }\r\n        this.authService.getLogger().verbose(\"MSAL Guard activated\");\r\n\r\n        /*\r\n         * If a page with MSAL Guard is set as the redirect for acquireTokenSilent,\r\n         * short-circuit to prevent redirecting or popups.\r\n         */\r\n        if (typeof window !== \"undefined\") {\r\n            if (UrlString.hashContainsKnownProperties(window.location.hash) && BrowserUtils.isInIframe() && !this.authService.instance.getConfiguration().system.allowRedirectInIframe) {\r\n                this.authService.getLogger().warning(\"Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication.\");\r\n                return of(false);\r\n            }\r\n        } else {\r\n            this.authService.getLogger().info(\"Guard - window is undefined, MSAL does not support server-side token acquisition\");\r\n            return of(true);\r\n        }\r\n\r\n        /**\r\n         * If a loginFailedRoute is set in the config, set this as the loginFailedRoute\r\n         */\r\n        if (this.msalGuardConfig.loginFailedRoute) {\r\n            this.loginFailedRoute = this.parseUrl(this.msalGuardConfig.loginFailedRoute);\r\n        }\r\n\r\n        // Capture current path before it gets changed by handleRedirectObservable\r\n        const currentPath = this.location.path(true);\r\n\r\n        return this.authService.handleRedirectObservable()\r\n            .pipe(\r\n                concatMap(() => {\r\n                    if (!this.authService.instance.getAllAccounts().length) {\r\n                        if (state) {\r\n                            this.authService.getLogger().verbose(\"Guard - no accounts retrieved, log in required to activate\");\r\n                            return this.loginInteractively(state);\r\n                        } \r\n                        this.authService.getLogger().verbose(\"Guard - no accounts retrieved, no state, cannot load\");\r\n                        return of(false);\r\n                    }\r\n\r\n                    this.authService.getLogger().verbose(\"Guard - at least 1 account exists, can activate or load\");\r\n\r\n                    // Prevent navigating the app to /#code= or /code=\r\n                    if (state) {\r\n                        /*\r\n                         * Path routing:\r\n                         * state.url: /#code=...\r\n                         * state.root.fragment: code=...\r\n                         */\r\n\r\n                        /*\r\n                         * Hash routing:\r\n                         * state.url: /code\r\n                         * state.root.fragment: null\r\n                         */\r\n                        const urlContainsCode: boolean = this.includesCode(state.url);\r\n                        const fragmentContainsCode: boolean = !!state.root && !!state.root.fragment && this.includesCode(`#${state.root.fragment}`);\r\n                        const hashRouting: boolean = this.location.prepareExternalUrl(state.url).indexOf(\"#\") === 0;\r\n\r\n                        // Ensure code parameter is in fragment (and not in query parameter), or that hash hash routing is used\r\n                        if (urlContainsCode && (fragmentContainsCode || hashRouting)) {\r\n                            this.authService.getLogger().info(\"Guard - Hash contains known code response, stopping navigation.\");\r\n                            \r\n                            // Path routing (navigate to current path without hash)\r\n                            if (currentPath.indexOf(\"#\") > -1) {\r\n                                return of(this.parseUrl(this.location.path()));\r\n                            }\r\n                            \r\n                            // Hash routing (navigate to root path)\r\n                            return of(this.parseUrl(\"\"));\r\n                        }\r\n                    }\r\n\r\n                    return of(true);\r\n\r\n                }),\r\n                catchError((error: Error) => {\r\n                    this.authService.getLogger().error(\"Guard - error while logging in, unable to activate\");\r\n                    this.authService.getLogger().errorPii(`Guard - error: ${error.message}`);\r\n                    /**\r\n                     * If a loginFailedRoute is set, checks to see if Angular 10+ is used and state is passed in before returning route\r\n                     * Apps using Angular 9 will receive of(false) in canLoad interface, as it does not support UrlTree return types\r\n                     */\r\n                    if (this.loginFailedRoute && parseInt(VERSION.major, 10) > 9 && state) {\r\n                        this.authService.getLogger().verbose(\"Guard - loginFailedRoute set, redirecting\");\r\n                        return of(this.loginFailedRoute);\r\n                    }\r\n                    return of(false);\r\n                })\r\n            );\r\n    }\r\n\r\n    includesCode(path: string): boolean {\r\n        return (path.lastIndexOf(\"/code\") > -1 &&\r\n            path.lastIndexOf(\"/code\") === path.length - \"/code\".length) || // path.endsWith(\"/code\")\r\n            path.indexOf(\"#code=\") > -1 || \r\n            path.indexOf(\"&code=\") > -1;\r\n    }\r\n\r\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean|UrlTree> {\r\n        this.authService.getLogger().verbose(\"Guard - canActivate\");\r\n        return this.activateHelper(state);\r\n    }\r\n\r\n    canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean|UrlTree> {\r\n        this.authService.getLogger().verbose(\"Guard - canActivateChild\");\r\n        return this.activateHelper(state);\r\n    }\r\n\r\n    canLoad(): Observable<boolean> {\r\n        this.authService.getLogger().verbose(\"Guard - canLoad\");\r\n        // @ts-ignore\r\n        return this.activateHelper();\r\n    }\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport {\r\n    HttpRequest,\r\n    HttpHandler,\r\n    HttpEvent,\r\n    HttpInterceptor\r\n} from \"@angular/common/http\";\r\nimport { Location, DOCUMENT } from \"@angular/common\";\r\nimport { Observable, EMPTY, of } from \"rxjs\";\r\nimport { switchMap, catchError, take, filter } from \"rxjs/operators\";\r\nimport { MsalService } from \"./msal.service\";\r\nimport { AccountInfo, AuthenticationResult, BrowserConfigurationAuthError, InteractionStatus, InteractionType, StringUtils, UrlString } from \"@azure/msal-browser\";\r\nimport { Injectable, Inject } from \"@angular/core\";\r\nimport { MSAL_INTERCEPTOR_CONFIG } from \"./constants\";\r\nimport { MsalInterceptorAuthRequest, MsalInterceptorConfiguration, ProtectedResourceScopes, MatchingResources } from \"./msal.interceptor.config\";\r\nimport { MsalBroadcastService } from \"./msal.broadcast.service\";\r\n\r\n@Injectable()\r\nexport class MsalInterceptor implements HttpInterceptor {\r\n    private _document?: Document;\r\n\r\n    constructor(\r\n        @Inject(MSAL_INTERCEPTOR_CONFIG) private msalInterceptorConfig: MsalInterceptorConfiguration,\r\n        private authService: MsalService,\r\n        private location: Location,\r\n        private msalBroadcastService: MsalBroadcastService,\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\r\n        @Inject(DOCUMENT) document?: any\r\n    ) {\r\n        this._document = document as Document;\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        if (this.msalInterceptorConfig.interactionType !== InteractionType.Popup && this.msalInterceptorConfig.interactionType !== InteractionType.Redirect) {\r\n            throw new BrowserConfigurationAuthError(\"invalid_interaction_type\", \"Invalid interaction type provided to MSAL Interceptor. InteractionType.Popup, InteractionType.Redirect must be provided in the msalInterceptorConfiguration\");\r\n        }\r\n\r\n        this.authService.getLogger().verbose(\"MSAL Interceptor activated\");\r\n        const scopes = this.getScopesForEndpoint(req.url, req.method);\r\n\r\n        // If no scopes for endpoint, does not acquire token\r\n        if (!scopes || scopes.length === 0) {\r\n            this.authService.getLogger().verbose(\"Interceptor - no scopes for endpoint\");\r\n            return next.handle(req);\r\n        }\r\n\r\n        // Sets account as active account or first account\r\n        let account: AccountInfo;\r\n        if (!!this.authService.instance.getActiveAccount()) {\r\n            this.authService.getLogger().verbose(\"Interceptor - active account selected\");\r\n            account = this.authService.instance.getActiveAccount();\r\n        } else {\r\n            this.authService.getLogger().verbose(\"Interceptor - no active account, fallback to first account\");\r\n            account = this.authService.instance.getAllAccounts()[0];\r\n        }\r\n\r\n        const authRequest = typeof this.msalInterceptorConfig.authRequest === \"function\"\r\n            ? this.msalInterceptorConfig.authRequest(this.authService, req, { account: account })\r\n            : { ...this.msalInterceptorConfig.authRequest, account };\r\n\r\n        this.authService.getLogger().info(`Interceptor - ${scopes.length} scopes found for endpoint`);\r\n        this.authService.getLogger().infoPii(`Interceptor - [${scopes}] scopes found for ${req.url}`);\r\n\r\n        return this.acquireToken(authRequest, scopes, account)\r\n            .pipe(\r\n                switchMap((result: AuthenticationResult) => {\r\n                    this.authService.getLogger().verbose(\"Interceptor - setting authorization headers\");\r\n                    const headers = req.headers\r\n                        .set(\"Authorization\", `Bearer ${result.accessToken}`);\r\n\r\n                    const requestClone = req.clone({headers});\r\n                    return next.handle(requestClone);\r\n                })\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Try to acquire token silently. Invoke interaction if acquireTokenSilent rejected with error or resolved with null access token\r\n     * @param authRequest Request\r\n     * @param scopes Array of scopes for the request\r\n     * @param account Account\r\n     * @returns Authentication result\r\n     */\r\n    private acquireToken(authRequest: MsalInterceptorAuthRequest, scopes: string[], account: AccountInfo): Observable<AuthenticationResult> {\r\n        // Note: For MSA accounts, include openid scope when calling acquireTokenSilent to return idToken\r\n        return this.authService.acquireTokenSilent({...authRequest, scopes, account })\r\n            .pipe(\r\n                catchError(() => {\r\n                    this.authService.getLogger().error(\"Interceptor - acquireTokenSilent rejected with error. Invoking interaction to resolve.\");\r\n                    return this.msalBroadcastService.inProgress$\r\n                        .pipe(\r\n                            take(1),\r\n                            switchMap((status: InteractionStatus) => {\r\n                                if (status === InteractionStatus.None) {\r\n                                    return this.acquireTokenInteractively(authRequest, scopes);\r\n                                }\r\n\r\n                                return this.msalBroadcastService.inProgress$\r\n                                    .pipe(\r\n                                        filter((status: InteractionStatus) => status === InteractionStatus.None),\r\n                                        take(1),\r\n                                        switchMap(() => this.acquireToken(authRequest, scopes, account))\r\n                                    );\r\n                            })\r\n                        );\r\n                }),\r\n                switchMap((result: AuthenticationResult)  => {\r\n                    if (!result.accessToken) {\r\n                        this.authService.getLogger().error(\"Interceptor - acquireTokenSilent resolved with null access token. Known issue with B2C tenants, invoking interaction to resolve.\");\r\n                        return this.msalBroadcastService.inProgress$\r\n                            .pipe(\r\n                                filter((status: InteractionStatus) => status === InteractionStatus.None),\r\n                                take(1),\r\n                                switchMap(() => this.acquireTokenInteractively(authRequest, scopes))\r\n                            );\r\n                    }\r\n                    return of(result);\r\n                })\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Invoke interaction for the given set of scopes\r\n     * @param authRequest Request\r\n     * @param scopes Array of scopes for the request\r\n     * @returns Result from the interactive request\r\n     */\r\n    private acquireTokenInteractively(authRequest: MsalInterceptorAuthRequest, scopes: string[]): Observable<AuthenticationResult> {\r\n        if (this.msalInterceptorConfig.interactionType === InteractionType.Popup) {\r\n            this.authService.getLogger().verbose(\"Interceptor - error acquiring token silently, acquiring by popup\");\r\n            return this.authService.acquireTokenPopup({ ...authRequest, scopes });\r\n        }\r\n        this.authService.getLogger().verbose(\"Interceptor - error acquiring token silently, acquiring by redirect\");\r\n        const redirectStartPage = window.location.href;\r\n        this.authService.acquireTokenRedirect({...authRequest, scopes, redirectStartPage });\r\n        return EMPTY;\r\n    }\r\n\r\n    /**\r\n     * Looks up the scopes for the given endpoint from the protectedResourceMap\r\n     * @param endpoint Url of the request\r\n     * @param httpMethod Http method of the request\r\n     * @returns Array of scopes, or null if not found\r\n     *\r\n     */\r\n    private getScopesForEndpoint(endpoint: string, httpMethod: string): Array<string>|null {\r\n        this.authService.getLogger().verbose(\"Interceptor - getting scopes for endpoint\");\r\n\r\n        // Ensures endpoints and protected resources compared are normalized\r\n        const normalizedEndpoint = this.location.normalize(endpoint);\r\n\r\n        const protectedResourcesArray = Array.from(this.msalInterceptorConfig.protectedResourceMap.keys());\r\n\r\n        const matchingProtectedResources = this.matchResourcesToEndpoint(protectedResourcesArray, normalizedEndpoint);\r\n\r\n        // Check absolute urls of resources first before checking relative to prevent incorrect matching where multiple resources have similar relative urls\r\n        if (matchingProtectedResources.absoluteResources.length > 0) {\r\n            return this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap, matchingProtectedResources.absoluteResources, httpMethod);\r\n        } else if (matchingProtectedResources.relativeResources.length > 0){\r\n            return this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap, matchingProtectedResources.relativeResources, httpMethod);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Finds resource endpoints that match request endpoint\r\n     * @param protectedResourcesEndpoints\r\n     * @param endpoint\r\n     * @returns\r\n     */\r\n    private matchResourcesToEndpoint(protectedResourcesEndpoints: string[], endpoint: string): MatchingResources {\r\n        const matchingResources: MatchingResources = {absoluteResources: [], relativeResources: []};\r\n\r\n        protectedResourcesEndpoints.forEach(key => {\r\n            // Normalizes and adds resource to matchingResources.absoluteResources if key matches endpoint. StringUtils.matchPattern accounts for wildcards\r\n            const normalizedKey = this.location.normalize(key);\r\n            if (StringUtils.matchPattern(normalizedKey, endpoint)){\r\n                matchingResources.absoluteResources.push(key);\r\n            }\r\n\r\n            // Get url components for relative urls\r\n            const absoluteKey = this.getAbsoluteUrl(key);\r\n            const keyComponents = new UrlString(absoluteKey).getUrlComponents();\r\n            const absoluteEndpoint = this.getAbsoluteUrl(endpoint);\r\n            const endpointComponents = new UrlString(absoluteEndpoint).getUrlComponents();\r\n\r\n            // Normalized key should include query strings if applicable\r\n            const relativeNormalizedKey = keyComponents.QueryString ? `${keyComponents.AbsolutePath}?${keyComponents.QueryString}` : this.location.normalize(keyComponents.AbsolutePath);\r\n\r\n            // Add resource to matchingResources.relativeResources if same origin, relativeKey matches endpoint, and is not empty\r\n            if (keyComponents.HostNameAndPort === endpointComponents.HostNameAndPort && StringUtils.matchPattern(relativeNormalizedKey, absoluteEndpoint) && relativeNormalizedKey !== \"\" && relativeNormalizedKey !== \"/*\"){\r\n                matchingResources.relativeResources.push(key);\r\n            }\r\n        });\r\n\r\n        return matchingResources;\r\n    }\r\n\r\n    /**\r\n     * Transforms relative urls to absolute urls\r\n     * @param url\r\n     * @returns\r\n     */\r\n    private getAbsoluteUrl(url: string): string {\r\n        const link = this._document.createElement(\"a\");\r\n        link.href = url;\r\n        return link.href;\r\n    }\r\n\r\n    /**\r\n     * Finds scopes from first matching endpoint with HTTP method that matches request\r\n     * @param protectedResourceMap Protected resource map\r\n     * @param endpointArray Array of resources that match request endpoint\r\n     * @param httpMethod Http method of the request\r\n     * @returns\r\n     */\r\n    private matchScopesToEndpoint(protectedResourceMap: Map<string, Array<string|ProtectedResourceScopes> | null>, endpointArray: string[], httpMethod: string): Array<string>|null {\r\n        const allMatchedScopes = [];\r\n\r\n        // Check each matched endpoint for matching HttpMethod and scopes\r\n        endpointArray.forEach(matchedEndpoint => {\r\n            const scopesForEndpoint = [];\r\n            const methodAndScopesArray = protectedResourceMap.get(matchedEndpoint);\r\n\r\n            // Return if resource is unprotected\r\n            if (methodAndScopesArray === null) {\r\n                allMatchedScopes.push(null);\r\n                return;\r\n            }\r\n\r\n            methodAndScopesArray.forEach(entry => {\r\n                // Entry is either array of scopes or ProtectedResourceScopes object\r\n                if (typeof entry === \"string\") {\r\n                    scopesForEndpoint.push(entry);\r\n                } else {\r\n                    // Ensure methods being compared are normalized\r\n                    const normalizedRequestMethod = httpMethod.toLowerCase();\r\n                    const normalizedResourceMethod = entry.httpMethod.toLowerCase();\r\n                    // Method in protectedResourceMap matches request http method\r\n                    if (normalizedResourceMethod === normalizedRequestMethod) {\r\n                        // Validate if scopes comes null to unprotect the resource in a certain http method\r\n                        if (entry.scopes === null) {\r\n                            allMatchedScopes.push(null);\r\n                        } else {\r\n                            entry.scopes.forEach((scope) => {\r\n                                scopesForEndpoint.push(scope);\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Only add to all scopes if scopes for endpoint and method is found\r\n            if (scopesForEndpoint.length > 0) {\r\n                allMatchedScopes.push(scopesForEndpoint);\r\n            }\r\n        });\r\n\r\n        if (allMatchedScopes.length > 0) {\r\n            if (allMatchedScopes.length > 1) {\r\n                this.authService.getLogger().warning(\"Interceptor - More than 1 matching scopes for endpoint found.\");\r\n            }\r\n            // Returns scopes for first matching endpoint\r\n            return allMatchedScopes[0];\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\n/**\r\n * This is a dedicated redirect component to be added to Angular apps to \r\n * handle redirects when using @azure/msal-angular.\r\n * Import this component to use redirects in your app.\r\n */\r\n\r\nimport { Component, OnInit } from \"@angular/core\";\r\nimport { concatMap } from \"rxjs/operators\";\r\nimport { MsalService } from \"./msal.service\";\r\n\r\n@Component({\r\n    selector: \"app-redirect\",\r\n    template: \"\"\r\n})\r\nexport class MsalRedirectComponent implements OnInit {\r\n\r\n    constructor(private authService: MsalService) { }\r\n\r\n    ngOnInit(): void {    \r\n        this.authService.getLogger().verbose(\"MsalRedirectComponent activated\");\r\n        this.authService.initialize().pipe(\r\n            concatMap(() => {\r\n                return this.authService.handleRedirectObservable();\r\n            })\r\n        ).subscribe();\r\n    }\r\n\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { ModuleWithProviders, NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { IPublicClientApplication } from \"@azure/msal-browser\";\r\nimport { MsalGuardConfiguration } from \"./msal.guard.config\";\r\nimport { MsalInterceptorConfiguration } from \"./msal.interceptor.config\";\r\nimport { MsalGuard } from \"./msal.guard\";\r\nimport { MsalBroadcastService } from \"./msal.broadcast.service\";\r\nimport { MsalService } from \"./msal.service\";\r\nimport { MSAL_INSTANCE , MSAL_GUARD_CONFIG, MSAL_INTERCEPTOR_CONFIG } from \"./constants\";\r\nimport { MsalRedirectComponent } from \"./msal.redirect.component\";\r\n\r\n@NgModule({\r\n    declarations: [MsalRedirectComponent],\r\n    imports: [\r\n        CommonModule\r\n    ],\r\n    providers: [\r\n        MsalGuard,\r\n        MsalBroadcastService\r\n    ]\r\n})\r\nexport class MsalModule {\r\n    static forRoot(\r\n        msalInstance: IPublicClientApplication,\r\n        guardConfig: MsalGuardConfiguration,\r\n        interceptorConfig: MsalInterceptorConfiguration\r\n    ): ModuleWithProviders<MsalModule> {\r\n        return {\r\n            ngModule: MsalModule,\r\n            providers: [\r\n                {\r\n                    provide: MSAL_INSTANCE,\r\n                    useValue: msalInstance\r\n                },\r\n                {\r\n                    provide: MSAL_GUARD_CONFIG,\r\n                    useValue: guardConfig\r\n                },\r\n                {\r\n                    provide: MSAL_INTERCEPTOR_CONFIG,\r\n                    useValue: interceptorConfig\r\n                },\r\n                MsalService\r\n            ]\r\n        };\r\n    }\r\n\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { NavigationClient, NavigationOptions, UrlString } from \"@azure/msal-browser\";\r\nimport { Router } from \"@angular/router\";\r\nimport { Location } from \"@angular/common\";\r\nimport { MsalService } from \"./msal.service\";\r\nimport { Injectable } from \"@angular/core\";\r\n\r\n/**\r\n * Custom navigation used for Angular client-side navigation.\r\n * See performance doc for details:\r\n * https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/lib/msal-angular/docs/v2-docs/performance.md\r\n */\r\n@Injectable()\r\nexport class MsalCustomNavigationClient extends NavigationClient {\r\n\r\n    constructor(\r\n        private authService: MsalService,\r\n        private router: Router, \r\n        private location: Location\r\n    ) {\r\n        super();\r\n    }\r\n\r\n    async navigateInternal(url:string, options: NavigationOptions): Promise<boolean> {\r\n        this.authService.getLogger().trace(\"MsalCustomNavigationClient called\");\r\n        \r\n        this.authService.getLogger().verbose(\"MsalCustomNavigationClient - navigating\");\r\n        this.authService.getLogger().verbosePii(`MsalCustomNavigationClient - navigating to url: ${url}`);\r\n        \r\n        // Prevent hash clearing from causing an issue with Client-side navigation after redirect is handled\r\n        if (options.noHistory) {\r\n            return super.navigateInternal(url, options);\r\n        } else {\r\n            // Normalizing newUrl if no query string\r\n            const urlComponents = new UrlString(url).getUrlComponents();\r\n            const newUrl = urlComponents.QueryString ? `${urlComponents.AbsolutePath}?${urlComponents.QueryString}` : this.location.normalize(urlComponents.AbsolutePath);\r\n            this.router.navigateByUrl(newUrl, { replaceUrl: options.noHistory });\r\n        }\r\n        return Promise.resolve(options.noHistory);\r\n    }\r\n}\r\n","/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\n/**\r\n * @packageDocumentation\r\n * @module @azure/msal-angular\r\n */\r\n\r\nexport { MsalService } from \"./msal.service\";\r\nexport { IMsalService } from \"./IMsalService\";\r\nexport { MsalGuard } from \"./msal.guard\";\r\nexport { MsalGuardConfiguration, MsalGuardAuthRequest } from \"./msal.guard.config\";\r\nexport { MsalInterceptor } from \"./msal.interceptor\";\r\nexport { MsalInterceptorConfiguration, MsalInterceptorAuthRequest, ProtectedResourceScopes } from \"./msal.interceptor.config\";\r\nexport { MSAL_INSTANCE, MSAL_GUARD_CONFIG, MSAL_INTERCEPTOR_CONFIG, MSAL_BROADCAST_CONFIG } from \"./constants\";\r\nexport { MsalBroadcastService } from \"./msal.broadcast.service\";\r\nexport { MsalBroadcastConfiguration } from \"./msal.broadcast.config\";\r\nexport { MsalModule } from \"./msal.module\";\r\nexport { MsalRedirectComponent } from \"./msal.redirect.component\";\r\nexport { MsalCustomNavigationClient } from \"./msal.navigation.client\";\r\nexport { version } from \"./packageMetadata\";\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}